


### 安装
```

    cd ZLMediaKit
    mkdir build
    cd build
    #macOS下可能需要这样指定openss路径：cmake .. -DOPENSSL_ROOT_DIR=/usr/local/Cellar/openssl/1.0.2j/
    cmake ..
    make -j4
```
查看在线视频流
http://192.168.121.130/index/api/getMediaList
https://www.bilibili.com/video/BV1cK411z73C/?spm_id_from=333.788&vd_source=47a8ecfae6ac799392c4199544055284

### 测试验证
ffmpeg -re -i "../video/d.mp4" -vcodec h264 -acodec aac -f rtsp -rtsp_transport tcp rtsp://192.168.121.130/live/test
查看 http://192.168.121.130/live/test.live.flv

ffmpeg -re -i "../video/d.mp4" -vcodec h264 -acodec aac -f rtp_mpegts rtp:/192.168.121.130:10000
查看 rtsp://192.168.121.130/rtp/A6F3886C

rtmp://192.168.121.130/rtp/test
rtsp://192.168.121.130/rtp/test
http://192.168.121.130:80/rtp/test/hls.m3u8

vcl播放：
rtsp://192.168.121.130:554/live/test?token=abcdefg&field=value


https://doc.wvp-pro.cn/#/_content/ability/push?id=%e5%8a%9f%e8%83%bd%e8%af%b4%e6%98%8e
rtsp推送
ffmpeg -re -i "../video/d.mp4" -vcodec h264 -acodec aac -f rtsp rtsp://192.168.121.130:554/test/live?sign=41db35390ddad33f83944f44b8b75ded

ffmpeg -re -stream_loop -1 -i "../video/a.mp4" -c copy -f rtsp rtsp://192.168.121.130:554/test/live?sign=41db35390ddad33f83944f44b8b75ded


API接口
http://192.168.121.130/index/api/getServerConfig?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc
http://192.168.121.130:18080/doc.html
#### GB28181推流
https://github.com/ZLMediaKit/ZLMediaKit/wiki/GB28181%E6%8E%A8%E6%B5%81
####  播放url规则
https://github.com/ZLMediaKit/ZLMediaKit/wiki/%E6%92%AD%E6%94%BEurl%E8%A7%84%E5%88%99



GB28181国标平台软件(包含服务器和客户端)
https://blog.csdn.net/QuickGBLink/article/details/103263391




http://192.168.121.130/index/api/getServerConfig?secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc


### 测试端口
http/hls/http-flv/ws-flv地址: http://zlmediakit.com:8888/
https地址： 80
rtsp地址： 554
rtmp地址： 1935
GB28181 UDP/TCP地址: 1000


 TCP server listening on [::]: 554
 TCP server listening on [::]: 1935
 TCP server listening on [::]: 80
 TCP server listening on [::]: 443
 TCP server listening on [::]: 10000
 UDP server bind to [::]: 10000
  UDP server bind to [::]: 9000



### FFMPEG推流
3.1 UDP推流
ffmpeg -re -i input.mp4 -c copy -f rtsp rtsp://127.0.0.1:8554/stream
3.2 TCP推流
ffmpeg -re -i input.mp4 -c copy -rtsp_transport tcp -f rtsp rtsp://127.0.0.1:8554/stream
3.3 循环推流
ffmpeg -re -stream_loop -1 -i input.mp4 -c copy -f rtsp rtsp://127.0.0.1:8554/stream

-re 为以流的方式读取；
-stream_loop 为循环读取视频源的次数，-1为无限循环；
-i 为输入的文件；
-f 为格式化输出到哪里；

### 报错
```
[root@localhost build]# cmake ..
-- Debug版本
-- found library:"/usr/local/lib/libjemalloc.so"
-- found library:/usr/lib64/libssl.so;/usr/lib64/libcrypto.so,ENABLE_OPENSSL defined
-- MySQL not found.
-- ENABLE_HLS defined
-- ENABLE_MP4 defined
-- ENABLE_RTPPROXY defined
-- add c api tester:pusher
-- add c api tester:server
-- add c api tester:websocket
-- test_player ingored, please install sdl2 ffmpeg/libavcodec ffmpeg/libavutil
-- add test:bom
-- add test:tab
-- add test:test_bench_proxy
-- add test:test_bench_pull
-- add test:test_sortor
-- add test:test_wsClient
-- add test:test_wsServer
-- Git version is master:f2edf354de355fd12dfba598fbb4081f09e405eb:2021/03/22-16:25:54
-- Configuring done
CMake Error at CMakeLists.txt:157 (add_library):
  No SOURCES given to target: flv
CMake Error at CMakeLists.txt:133 (add_library):
  No SOURCES given to target: mpeg
CMake Error at CMakeLists.txt:156 (add_library):
  No SOURCES given to target: mov
CMake Error at CMakeLists.txt:189 (add_library):
  No SOURCES given to target: zltoolkit
CMake Generate step failed.  Build files cannot be regenerated correctly.
```
https://github.com/ZLMediaKit/ZLMediaKit/issues/781
wiki快速开始
#国内用户推荐从同步镜像网站gitee下载 
git clone --depth 1 https://gitee.com/xia-chu/ZLMediaKit
cd ZLMediaKit
#千万不要忘记执行这句命令
git submodule update --init